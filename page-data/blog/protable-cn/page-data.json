{"componentChunkName":"component---src-templates-docs-tsx","path":"/blog/protable-cn","result":{"data":{"markdownRemark":{"html":"<p>大部分中后台页面都是非常同质化的 CRUD 组成的，很多时候都是一个 Table，然后提供一些操作按钮，并且有一个新增表单。看起来就像这样：</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/w6XCWacQH6/1582038656687-065b40ef-5029-4bf7-8941-6e843570e4e0.png\" alt=\"0BAFCFEF-9EA2-4DB7-A36D-4D5A092BCC30.png\"></p>\n<h2 id=\"🤷♂️-为什么要做-protable\" style=\"position:relative;\"><a href=\"#%F0%9F%A4%B7%E2%99%82%EF%B8%8F-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%81%9A-protable\" aria-label=\"🤷♂️ 为什么要做 protable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤷‍♂️ 为什么要做 ProTable</h2>\n<p>antd 作为服务于企业级产品的设计体系的组件库，已经提供了强大的 Table，但是业务的不同导致我们仍有需要进行一些定制，不同的单元格有很多不同的数据格式，金额，日期，数字等，包括一些常用的操作，页码切换时的重新请求，刷新数据等，这些都是很简单的重复劳动，但是却不可避免。</p>\n<p>ProTable 就是为了解决这些问题，在 Table 的层面上提供了一些预设，你可以通过 <a href=\"https://protable.ant.design/value-type\"><code>valueType</code> </a>来支持各种类型的数据，预设了 金额，日期，序号，进度条 等多种类型，并且支持通过 <code>valueEnum</code>  来映射枚举，解决非常烦人的各种枚举配置，可以大大的简化代码。</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> columns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    title<span class=\"token operator\">:</span> <span class=\"token string\">'状态'</span><span class=\"token punctuation\">,</span>\n    dataIndex<span class=\"token operator\">:</span> <span class=\"token string\">'status'</span><span class=\"token punctuation\">,</span>\n    initialValue<span class=\"token operator\">:</span> <span class=\"token string\">'all'</span><span class=\"token punctuation\">,</span>\n    width<span class=\"token operator\">:</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>\n    valueEnum<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n      close<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> text<span class=\"token operator\">:</span> <span class=\"token string\">'关闭'</span><span class=\"token punctuation\">,</span> status<span class=\"token operator\">:</span> <span class=\"token string\">'Default'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      running<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> text<span class=\"token operator\">:</span> <span class=\"token string\">'运行中'</span><span class=\"token punctuation\">,</span> status<span class=\"token operator\">:</span> <span class=\"token string\">'Processing'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      online<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> text<span class=\"token operator\">:</span> <span class=\"token string\">'已上线'</span><span class=\"token punctuation\">,</span> status<span class=\"token operator\">:</span> <span class=\"token string\">'Success'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      error<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> text<span class=\"token operator\">:</span> <span class=\"token string\">'异常'</span><span class=\"token punctuation\">,</span> status<span class=\"token operator\">:</span> <span class=\"token string\">'Error'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ProTable 接管了翻页，页码改变等事件，理论上你只要有配置列和 request 属性，就可以生成一个全功能的表格，完成分页查询，刷新，列属性修改等功能。</p>\n<p>在很多项目中 Table 的操作按钮与标题的位置都会不一致，即使是一个项目中也可能有一些不同，ProTable 提供了相应的规范，toolBarRender 与 headerTitle 实现了规范，toolBarRender 支持返回一个 ReactNode 数组，会自动地增加间隔等样式，toolBarRender 提供 action 与当前选中的列等数据，方便进行一些快捷的操作。代码看起来是这样的</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function-variable function\">toolBarRender</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>_<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> selectedRowKeys <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">[</span>\n  <span class=\"token operator\">&lt;</span>Button key<span class=\"token operator\">=</span><span class=\"token string\">\"3\"</span> <span class=\"token keyword\">type</span><span class=\"token operator\">=</span><span class=\"token string\">\"primary\"</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>PlusOutlined <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    新建\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  selectedRowKeys <span class=\"token operator\">&amp;&amp;</span> selectedRowKeys<span class=\"token punctuation\">.</span>length <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Button\n      key<span class=\"token operator\">=</span><span class=\"token string\">\"3\"</span>\n      onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        window<span class=\"token punctuation\">.</span><span class=\"token function\">alert</span><span class=\"token punctuation\">(</span>selectedRowKeys<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">></span>\n      批量删除\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"-更多的功能\" style=\"position:relative;\"><a href=\"#-%E6%9B%B4%E5%A4%9A%E7%9A%84%E5%8A%9F%E8%83%BD\" aria-label=\" 更多的功能 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🦄 更多的功能</h2>\n<p>一个完整的页面除了 Table 之外，还需要一个查询表单，查询表单很大程度上也是根据列来生成的，有些表单几乎和列是一一对应的。为了减少这部分的工作量，ProTable 会通过列的配置来自动生成查询表单。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/aIkGYS0KvN/1582127528798-704c4833-955e-4020-9f41-5206c42f2389.png\" alt=\"image.png\"></p>\n<p>根据不同的值类型，表单会生成不同的输入框，查询成功之后的数据会通过 request 的 params 参数自动发起查询，无需进行任何的数据绑定。</p>\n<p>如果你的表单比较简单，没有过多的特殊组件，或者你自行封装了很多符合 antd 表单的组件（指拥有受控的 value 和 onChange 方法），你可以通过  renderFormItem 来自行生成表单元素，然后配置  <code>type=Form</code>，就可以生成一个添加表单。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/p3YxxMOlwz/1582130440043-71722655-42e6-4698-a37a-14d69f6008b8%252520%281%29.png\" alt=\"image.png\"></p>\n<p>这样就可以用极低成本来实现一个 完整的 CRUD 界面，早日完成需求，早点下班。</p>\n<p>官网：<a href=\"https://protable.ant.design/\">https://protable.ant.design/</a></p>\n<p>Ant Design Table <a href=\"https://ant.design/components/table-cn/\">https://ant.design/components/table</a></p>","tableOfContents":"<ul>\n<li><a href=\"/blog/protable-cn/#%F0%9F%A4%B7%E2%99%82%EF%B8%8F-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%81%9A-protable\">🤷‍♂️ 为什么要做 ProTable</a></li>\n<li><a href=\"/blog/protable-cn/#-%E6%9B%B4%E5%A4%9A%E7%9A%84%E5%8A%9F%E8%83%BD\">🦄 更多的功能</a></li>\n</ul>","frontmatter":{"title":"ProTable 快速搭建 CRUD 的利器","order":7,"type":"Blog"},"fields":{"path":"/blog/protable.zh-CN.md","slug":"/blog/protable-cn","modifiedTime":1587460424222,"avatarList":"[{\"username\":\"chenshuai2144\",\"url\":\"https://avatars1.githubusercontent.com/u/8186664?s=40&v=4\"},{\"username\":\"juzhiyuan\",\"url\":\"https://avatars3.githubusercontent.com/u/2106987?s=40&v=4\"}]"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"黑色主题和动态切换","order":8,"type":"Blog","time":"2019-12-25T00:00:00.000Z"},"fields":{"slug":"/blog/dynamic-theme-cn","path":"/blog/dynamic-theme.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Layout 的全新样式","order":8,"type":"Blog","time":"2020-04-21T00:00:00.000Z"},"fields":{"slug":"/blog/layout-new-style-cn","path":"/blog/layout-new-style.zh-CN.md"}}},{"node":{"frontmatter":{"title":"同源策略 跨域与代理","order":7,"type":"Blog","time":"2019-11-24T00:00:00.000Z"},"fields":{"slug":"/blog/proxy-cn","path":"/blog/proxy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"前端最佳实践即将发布","order":7,"type":"Blog","time":"2020-02-29T00:00:00.000Z"},"fields":{"slug":"/blog/best-front0end-cn","path":"/blog/best-front0end.zh-CN.md"}}},{"node":{"frontmatter":{"title":"ProTable 快速搭建 CRUD 的利器","order":7,"type":"Blog","time":"2020-03-01T00:00:00.000Z"},"fields":{"slug":"/blog/protable-cn","path":"/blog/protable.zh-CN.md"}}},{"node":{"frontmatter":{"title":"我们是如何部署开源项目的?","order":6,"type":"Blog","time":"2019-11-02T00:00:00.000Z"},"fields":{"slug":"/blog/deploy-pro-cn","path":"/blog/deploy-pro.zh-CN.md"}}},{"node":{"frontmatter":{"title":"迁移 antd@4 指南","order":6,"type":"Blog","time":"2020-01-16T00:00:00.000Z"},"fields":{"slug":"/blog/antd-4.0-cn","path":"/blog/antd-4.0.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Block 新升级","order":5,"type":"Blog","time":"2019-06-28T00:00:00.000Z"},"fields":{"slug":"/blog/better-block-cn","path":"/blog/better-block.zh-CN.md"}}},{"node":{"frontmatter":{"title":"在线更换主题","order":1,"type":"Blog","time":"2019-05-07T00:00:00.000Z"},"fields":{"slug":"/blog/change-theme-cn","path":"/blog/change-theme.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Pro 的 Layout 组件","order":1,"type":"Blog","time":"2019-05-08T00:00:00.000Z"},"fields":{"slug":"/blog/new-pro-use-cn","path":"/blog/new-pro-use.zh-CN.md"}}},{"node":{"frontmatter":{"title":"一起来用 eslint 吧","order":1,"type":"Blog","time":"2019-06-21T00:00:00.000Z"},"fields":{"slug":"/blog/use-eslint-typescript-cn","path":"/blog/use-eslint-typescript.zh-CN.md"}}}]}},"pageContext":{"slug":"/blog/protable-cn","type":"/blog/","locale":"/-cn/"}},"staticQueryHashes":[]}