{"componentChunkName":"component---src-templates-docs-tsx","path":"/blog/deploy-pro","result":{"data":{"markdownRemark":{"html":"<p><img src=\"https://user-images.githubusercontent.com/8186664/68047427-585cd780-fd19-11e9-9439-0fe05aa93475.png\" alt=\"cdn-hosting\"></p>\n<p>To be a good open source project, an official website is essential, and Pro is no exception. Pro also has a preview interface with API access that requires a function with function.</p>\n<h3 id=\"technical-selection\" style=\"position:relative;\"><a href=\"#technical-selection\" aria-label=\"technical selection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Technical selection</h3>\n<p>Static websites are very simple to deploy, and there are many options available on the market. More commonly used are:</p>\n<ul>\n<li><a href=\"https://docs.netlify.com/\">Netlify</a> Support for static sites and functions, the user experience is great.</li>\n<li><a href=\"https://pages.github.com/\">Github pages</a> It's completely free, but only supports static.</li>\n<li><a href=\"https://firebase.google.cn/\">Google firebase</a> Powerful, with more cdn nodes.</li>\n<li><a href=\"https://www.cloudflare.com/\">cloudflare </a> Global cdn is powerful, but only supports static.</li>\n</ul>\n<p>For chinese users, firebase is not available, so the best solution is netlify, a lot of free, and has many convenient features, such as PR preview. Now the PR previews of Ant Design and Pro are all used by netlify, but netlify has no nodes in China, and the access speed is delayed by more than 3000ms. If your website is more than 2m, the access speed will be slow.</p>\n<p>Github Pages is Github's official solution, but only supports pure static pages and does not support any dynamic capabilities. And the access speed is not ideal. Cloudflare can solve this problem at this time. Cloudflare's cdn provides a global deployment node that guarantees a global access speed of less than 1000ms.</p>\n<h3 id=\"preview-deployment\" style=\"position:relative;\"><a href=\"#preview-deployment\" aria-label=\"preview deployment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Preview deployment</h3>\n<p>The official website is a static web page, and github + cloudflare can solve the problem perfectly. However, Pro's preview has api, you need to deploy a background service, and as a scaffold, some of the code can't be opened to users. In terms of API, we chose netlify, the function of AWS based on netlify function, and the stability and ease of use are good. Static websites can be accelerated with cloudflare acceleration.</p>\n<p>In <code>fetch:blocks</code>, we will add the buttons of <code>SettingDrawer</code> and copy block to the project. <code>SettingDrawer</code> is not recommended for use in production environments. It is added to display capabilities in the preview interface. of.</p>\n<blockquote>\n<p>Cloudflare does not support third-level domain names. If you need to accelerate it like us, consider upgrading the Professional Edition.</p>\n</blockquote>\n<h3 id=\"built-in-variable\" style=\"position:relative;\"><a href=\"#built-in-variable\" aria-label=\"built in variable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Built-in variable</h3>\n<p>In Pro's project, we added an environment variable <code>ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION</code> to determine whether it is a preview environment. If <code>ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION</code> we will inject Google Analytics and umi-plugin-pro plugin, the umi-plugin-pro plugin will be added to Pro. The Api request is converted to <code>https://ant-design-pro.netlify.com/api/xxx</code>. And the default user permissions are set to admin, allowing preview users to access any page.</p>\n<p>It is not recommended to open <code>ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION</code> and use <code>fetch:blocks</code> in the actual project.</p>\n<ul>\n<li><code>SettingDrawer</code> is not suitable for use in production, and the usage scheme is a bit problematic.</li>\n<li><code>ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION</code> Open will cause permissions issues and will report your project to our Google Analytics. This field in <code>ANT_DESIGN_PRO_ONLY_DO_NOT_USE_IN_YOUR_PRODUCTION</code> is long and confusing in order to prevent users from using it.</li>\n</ul>","tableOfContents":"<ul>\n<li><a href=\"/blog/deploy-pro/#technical-selection\">Technical selection</a></li>\n<li><a href=\"/blog/deploy-pro/#preview-deployment\">Preview deployment</a></li>\n<li><a href=\"/blog/deploy-pro/#built-in-variable\">Built-in variable</a></li>\n</ul>","frontmatter":{"title":"How do we deploy open source projects?","order":6,"type":"Blog"},"fields":{"path":"/blog/deploy-pro.en-US.md","slug":"/blog/deploy-pro","modifiedTime":1579141582381,"avatarList":"[{\"username\":\"chenshuai2144\",\"url\":\"https://avatars1.githubusercontent.com/u/8186664?s=40&v=4\"}]"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Black theme and dynamic switching","order":8,"type":"Blog","time":"2019-12-25T00:00:00.000Z"},"fields":{"slug":"/blog/dynamic-theme","path":"/blog/dynamic-theme.en-US.md"}}},{"node":{"frontmatter":{"title":"黑色主题和动态切换","order":8,"type":"Blog","time":"2019-12-25T00:00:00.000Z"},"fields":{"slug":"/blog/dynamic-theme-cn","path":"/blog/dynamic-theme.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Same-origin policy cross-domain and agent","order":7,"type":"Blog","time":"2019-11-24T00:00:00.000Z"},"fields":{"slug":"/blog/proxy","path":"/blog/proxy.en-US.md"}}},{"node":{"frontmatter":{"title":"同源策略 跨域与代理","order":7,"type":"Blog","time":"2019-11-24T00:00:00.000Z"},"fields":{"slug":"/blog/proxy-cn","path":"/blog/proxy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Front-end best practices coming soon","order":7,"type":"Blog","time":"2020-02-29T00:00:00.000Z"},"fields":{"slug":"/blog/best-front0end","path":"/blog/best-front0end.en-US.md"}}},{"node":{"frontmatter":{"title":"前端最佳实践即将发布","order":7,"type":"Blog","time":"2020-02-29T00:00:00.000Z"},"fields":{"slug":"/blog/best-front0end-cn","path":"/blog/best-front0end.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Quickly Builds CRUD's","order":7,"type":"Blog","time":"2020-03-01T00:00:00.000Z"},"fields":{"slug":"/blog/protable","path":"/blog/protable.en-US.md"}}},{"node":{"frontmatter":{"title":"ProTable 快速搭建 CRUD 的利器","order":7,"type":"Blog","time":"2020-03-01T00:00:00.000Z"},"fields":{"slug":"/blog/protable-cn","path":"/blog/protable.zh-CN.md"}}},{"node":{"frontmatter":{"title":"How do we deploy open source projects?","order":6,"type":"Blog","time":"2019-11-02T00:00:00.000Z"},"fields":{"slug":"/blog/deploy-pro","path":"/blog/deploy-pro.en-US.md"}}},{"node":{"frontmatter":{"title":"我们是如何部署开源项目的?","order":6,"type":"Blog","time":"2019-11-02T00:00:00.000Z"},"fields":{"slug":"/blog/deploy-pro-cn","path":"/blog/deploy-pro.zh-CN.md"}}},{"node":{"frontmatter":{"title":"迁移 antd@4 指南","order":6,"type":"Blog","time":"2020-01-16T00:00:00.000Z"},"fields":{"slug":"/blog/antd-4.0-cn","path":"/blog/antd-4.0.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Migration antd@4 Guide","order":6,"type":"Blog","time":"2020-01-16T00:00:00.000Z"},"fields":{"slug":"/blog/antd-4.0.en--us","path":"/blog/antd-4.0.en-Us.md"}}},{"node":{"frontmatter":{"title":"Better Block","order":5,"type":"Blog","time":"2019-06-28T00:00:00.000Z"},"fields":{"slug":"/blog/better-block","path":"/blog/better-block.en-US.md"}}},{"node":{"frontmatter":{"title":"Block 新升级","order":5,"type":"Blog","time":"2019-06-28T00:00:00.000Z"},"fields":{"slug":"/blog/better-block-cn","path":"/blog/better-block.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Customize theme on runtime","order":1,"type":"Blog","time":"2019-05-07T00:00:00.000Z"},"fields":{"slug":"/blog/change-theme","path":"/blog/change-theme.en-US.md"}}},{"node":{"frontmatter":{"title":"在线更换主题","order":1,"type":"Blog","time":"2019-05-07T00:00:00.000Z"},"fields":{"slug":"/blog/change-theme-cn","path":"/blog/change-theme.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Layout component of Ant Design Pro","order":1,"type":"Blog","time":"2019-05-08T00:00:00.000Z"},"fields":{"slug":"/blog/new-pro-use","path":"/blog/new-pro-use.en-US.md"}}},{"node":{"frontmatter":{"title":"Pro 的 Layout 组件","order":1,"type":"Blog","time":"2019-05-08T00:00:00.000Z"},"fields":{"slug":"/blog/new-pro-use-cn","path":"/blog/new-pro-use.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Let's use eslint","order":1,"type":"Blog","time":"2019-06-21T00:00:00.000Z"},"fields":{"slug":"/blog/use-eslint-typescript","path":"/blog/use-eslint-typescript.en-US.md"}}},{"node":{"frontmatter":{"title":"一起来用 eslint 吧","order":1,"type":"Blog","time":"2019-06-21T00:00:00.000Z"},"fields":{"slug":"/blog/use-eslint-typescript-cn","path":"/blog/use-eslint-typescript.zh-CN.md"}}}]}},"pageContext":{"slug":"/blog/deploy-pro","type":"/blog/","locale":"//"}}}