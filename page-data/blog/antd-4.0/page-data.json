{"componentChunkName":"component---src-templates-docs-tsx","path":"/blog/antd-4.0","result":{"data":{"markdownRemark":{"html":"<p>antd@4 rc has been released for a while (about two weeks), and <a href=\"https://next.ant.design/index\">Official Website</a> has also been released simultaneously. For a person who loves early adopters, of course, he must install and upgrade the first time. After consulting the bean paste teacher and getting a promise that the api will not be modified, I have completed the migration in my project. Enjoy the advantages of antd@4 for the first time.</p>\n<h3 id=\"-upgrade-points\" style=\"position:relative;\"><a href=\"#-upgrade-points\" aria-label=\" upgrade points permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>üöÄ Upgrade points</h3>\n<p>First of all, the biggest improvement for me is performance. Select, table and tree have fully supported virtual scrolling. As an early adopter of rc-tree to solve performance problems, it is naturally better to provide it in antd@4. After all, writing styles and dynamics yourself is very complicated.</p>\n<p>The rewritten table and from solve many of the remaining incurable diseases. For details, please see the antd@4 series of the bean paste teacher <a href=\"https://www.zhihu.com/people/smith-jiang/activities\">article</a>, which contains details. After writing the mental journey, we don't need to use the two methods <code>getFieldDecorator</code> and <code>Form.create</code> in the form. Pro full block has been taken as an example. These two methods have appeared 87 and 22 times respectively. I found 142 <code>getFieldDecorator</code> in one of my own maintenance projects, not to mention that in order to encapsulate components,<code>getFieldDecorator</code> was passed as props The complexity caused by the pass has increased. We can finally get rid of it in v4.</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/xJ0Xhrkwvu/8EA666B0-76C7-47AC-B999-9EE15D043215.png#align=left&#x26;display=inline&#x26;height=399&#x26;name=&#x26;originHeight=1800&#x26;originWidth=2880&#x26;status=done&#x26;style=none\" alt=\"diff\"></p>\n<p>See this is the removed diff</p>\n<p>Table can now also get the width automatically, and has a better fixed to the side, <a href=\"https://protable.ant.design/\">Pro-Table</a> as an example, here is a table of 3.0.</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/1nVM1VDeiz/a4ede9b8-1822-495d-9141-9c15107172a5.png\" alt=\"image.png\"></p>\n<p>In 4.0, the problem of high misalignment does not occur.</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/fyP4ANU8Eb/ea9962b9-a317-48b6-a37a-47b6eef9664a.png\" alt=\"image.png\"></p>\n<h3 id=\"migration-method\" style=\"position:relative;\"><a href=\"#migration-method\" aria-label=\"migration method permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Migration method</h3>\n<p>antd@4 has become more multi-billion and brought a huge amount of improvement, so how can we use such a great 4.0? In fact, it is very simple, Pro has all migrated [One] (https: // github. com / ant-design / pro-blocks / issues / 145). Officially provided us with <code>codemod-v4</code>, which is also very simple to use.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Run directly through npx</span>\nnpx -p @ ant-design / codemod-v4 antd4-codemod src\n\n<span class=\"token comment\"># Or global installation</span>\n<span class=\"token comment\"># Use npm</span>\n<span class=\"token function\">npm</span> i -g @ ant-design / codemod-v4\n<span class=\"token comment\"># Or use yarn</span>\n<span class=\"token function\">yarn</span> global <span class=\"token function\">add</span> @ ant-design / codemod-v4\n\n<span class=\"token comment\"># Run</span>\nantd4-codemod src</code></pre></div>\n<p>It is worth noting that if <code>&#x3C;Icon type = {type} /></code> is used in the project, it will be converted to <code>LegacyIcon</code>. You need to check here. If you are not a component library, you must not need<code>LegacyIcon</code>. After migration, you must Delete it, otherwise the icon file will be typed in full, but it has a size of about 540K.</p>\n<p>In order to be more semantic, the icon will be changed from the i tag to the span tag. After the change, you need to remember to check if there are similar usages like <code>i {}</code>, <code>i.anticon</code>, and if you can, you can change it to<code>span {}.</code>,<code>span.antion</code> to ensure that the migration is complete.</p>\n<p>In addition, because form is not compatible, codemod will not automatically help you to migrate to the new writing, but migrate to the compatibility package <code>@ ant-design / compatible</code> is convenient to use with the new version without full migration. The <code>ant-from</code> class name in the compatibility package will be updated to<code>ant-legacy-form</code>. If you modify the default style of the form remember to check it and modify it.</p>\n<p>If you encounter the problem that the form cannot be extended, you can add the following code:</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:global</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.ant-legacy-form-item .ant-legacy-form-item-control-wrapper</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 100%<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"used-in-pro\" style=\"position:relative;\"><a href=\"#used-in-pro\" aria-label=\"used in pro permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Used in Pro</h3>\n<p>Pro also migrated antd@4 in the first time, we only need to select ant-design-pro in create umi to get the latest 4.0 branch code.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">‚ùØ‚ùØ‚ùØ create-umi\n? Select the boilerplate <span class=\"token builtin class-name\">type</span> ant-design-pro\n? ü§ì Which language <span class=\"token keyword\">do</span> you want to use? TypeScript\n? ü¶Ñ Want to use better and faster antd? Yes\n<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> There may be some compatibility issues when using antd <span class=\"token number\">4.0</span>. Read the following documents <span class=\"token keyword\">for</span> specific changes\n<span class=\"token operator\">></span> There may be some compatibility issues when using antd <span class=\"token number\">4.0</span>. Read the following documents <span class=\"token keyword\">for</span> specific changes\n<span class=\"token operator\">></span> https://next.ant.design/docs/react/migration-v4-cn\n<span class=\"token operator\">></span></code></pre></div>\n<p>If you want to migrate to the new version, you can implement it as described in the above document, but you can set the icon configuration menu icon in Pro, which will not be supported in 4.0, so we provide the corresponding [plugin] (https: / /github.com/umijs/umi-plugin-antd-icon-config) to retain this feature.</p>\n<p>Use as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> umi-plugin-antd-icon-config -D</code></pre></div>\n<p>And set in config.ts</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'umi-plugin-antd-icon-config'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Painless migration antd@4 is as simple as that. All official blocks also support antd@4. Please use it with peace of mind.</p>\n<blockquote>\n<p>Due to the deletion of the 4.0 icon, if the icon disappears, please find a suitable replacement in the official website of antd.</p>\n</blockquote>\n<h3 id=\"-a-teaser\" style=\"position:relative;\"><a href=\"#-a-teaser\" aria-label=\" a teaser permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>‚ú® A teaser</h3>\n<p>Pro 4 has been released for some time, and we hope to explore a set of best practices in various internal and external practices, <a href=\"https://github.com/sorrycc/blog/issues/90\">sorrycc</a> article Made deep thoughts. Next we will publish our solution. Stay tuned!</p>","tableOfContents":"<ul>\n<li><a href=\"/blog/antd-4.0/#-upgrade-points\">üöÄ Upgrade points</a></li>\n<li><a href=\"/blog/antd-4.0/#migration-method\">Migration method</a></li>\n<li><a href=\"/blog/antd-4.0/#used-in-pro\">Used in Pro</a></li>\n<li><a href=\"/blog/antd-4.0/#-a-teaser\">‚ú® A teaser</a></li>\n</ul>","frontmatter":{"title":"Migration antd@4 Guide","order":6,"type":"Blog"},"fields":{"path":"/blog/antd-4.0.en-US.md","slug":"/blog/antd-4.0","modifiedTime":1604284204590,"avatarList":"[{\"username\":\"afc163\",\"url\":\"https://avatars0.githubusercontent.com/u/507615?s=40&v=4\"}]"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Black theme and dynamic switching","order":8,"type":"Blog","time":"2019-12-25T00:00:00.000Z"},"fields":{"slug":"/blog/dynamic-theme","path":"/blog/dynamic-theme.en-US.md"}}},{"node":{"frontmatter":{"title":"ÈªëËâ≤‰∏ªÈ¢òÂíåÂä®ÊÄÅÂàáÊç¢","order":8,"type":"Blog","time":"2019-12-25T00:00:00.000Z"},"fields":{"slug":"/blog/dynamic-theme-cn","path":"/blog/dynamic-theme.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Layout New Style","order":8,"type":"Blog","time":"2020-04-21T00:00:00.000Z"},"fields":{"slug":"/blog/layout-new-style","path":"/blog/layout-new-style.en-US.md"}}},{"node":{"frontmatter":{"title":"Layout ÁöÑÂÖ®Êñ∞Ê†∑Âºè","order":8,"type":"Blog","time":"2020-04-21T00:00:00.000Z"},"fields":{"slug":"/blog/layout-new-style-cn","path":"/blog/layout-new-style.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Same-origin policy cross-domain and agent","order":7,"type":"Blog","time":"2019-11-24T00:00:00.000Z"},"fields":{"slug":"/blog/proxy","path":"/blog/proxy.en-US.md"}}},{"node":{"frontmatter":{"title":"ÂêåÊ∫êÁ≠ñÁï• Ë∑®Âüü‰∏é‰ª£ÁêÜ","order":7,"type":"Blog","time":"2019-11-24T00:00:00.000Z"},"fields":{"slug":"/blog/proxy-cn","path":"/blog/proxy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Front-end best practices coming soon","order":7,"type":"Blog","time":"2020-02-29T00:00:00.000Z"},"fields":{"slug":"/blog/best-front0end","path":"/blog/best-front0end.en-US.md"}}},{"node":{"frontmatter":{"title":"ÂâçÁ´ØÊúÄ‰Ω≥ÂÆûË∑µÂç≥Â∞ÜÂèëÂ∏É","order":7,"type":"Blog","time":"2020-02-29T00:00:00.000Z"},"fields":{"slug":"/blog/best-front0end-cn","path":"/blog/best-front0end.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Quickly Builds CRUD's","order":7,"type":"Blog","time":"2020-03-01T00:00:00.000Z"},"fields":{"slug":"/blog/protable","path":"/blog/protable.en-US.md"}}},{"node":{"frontmatter":{"title":"ProTable Âø´ÈÄüÊê≠Âª∫ CRUD ÁöÑÂà©Âô®","order":7,"type":"Blog","time":"2020-03-01T00:00:00.000Z"},"fields":{"slug":"/blog/protable-cn","path":"/blog/protable.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Êàë‰ª¨ÊòØÂ¶Ç‰ΩïÈÉ®ÁΩ≤ÂºÄÊ∫êÈ°πÁõÆÁöÑ?","order":6,"type":"Blog","time":"2019-11-02T00:00:00.000Z"},"fields":{"slug":"/blog/deploy-pro-cn","path":"/blog/deploy-pro.zh-CN.md"}}},{"node":{"frontmatter":{"title":"How do we deploy open source projects?","order":6,"type":"Blog","time":"2019-11-02T00:00:00.000Z"},"fields":{"slug":"/blog/deploy-pro","path":"/blog/deploy-pro.en-US.md"}}},{"node":{"frontmatter":{"title":"ËøÅÁßª antd@4 ÊåáÂçó","order":6,"type":"Blog","time":"2020-01-16T00:00:00.000Z"},"fields":{"slug":"/blog/antd-4.0-cn","path":"/blog/antd-4.0.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Migration antd@4 Guide","order":6,"type":"Blog","time":"2020-01-16T00:00:00.000Z"},"fields":{"slug":"/blog/antd-4.0","path":"/blog/antd-4.0.en-US.md"}}},{"node":{"frontmatter":{"title":"Better Block","order":5,"type":"Blog","time":"2019-06-28T00:00:00.000Z"},"fields":{"slug":"/blog/better-block","path":"/blog/better-block.en-US.md"}}},{"node":{"frontmatter":{"title":"Block Êñ∞ÂçáÁ∫ß","order":5,"type":"Blog","time":"2019-06-28T00:00:00.000Z"},"fields":{"slug":"/blog/better-block-cn","path":"/blog/better-block.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Customize theme on runtime","order":1,"type":"Blog","time":"2019-05-07T00:00:00.000Z"},"fields":{"slug":"/blog/change-theme","path":"/blog/change-theme.en-US.md"}}},{"node":{"frontmatter":{"title":"Âú®Á∫øÊõ¥Êç¢‰∏ªÈ¢ò","order":1,"type":"Blog","time":"2019-05-07T00:00:00.000Z"},"fields":{"slug":"/blog/change-theme-cn","path":"/blog/change-theme.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Pro ÁöÑ Layout ÁªÑ‰ª∂","order":1,"type":"Blog","time":"2019-05-08T00:00:00.000Z"},"fields":{"slug":"/blog/new-pro-use-cn","path":"/blog/new-pro-use.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Layout component of Ant Design Pro","order":1,"type":"Blog","time":"2019-05-08T00:00:00.000Z"},"fields":{"slug":"/blog/new-pro-use","path":"/blog/new-pro-use.en-US.md"}}},{"node":{"frontmatter":{"title":"Let's use eslint","order":1,"type":"Blog","time":"2019-06-21T00:00:00.000Z"},"fields":{"slug":"/blog/use-eslint-typescript","path":"/blog/use-eslint-typescript.en-US.md"}}},{"node":{"frontmatter":{"title":"‰∏ÄËµ∑Êù•Áî® eslint Âêß","order":1,"type":"Blog","time":"2019-06-21T00:00:00.000Z"},"fields":{"slug":"/blog/use-eslint-typescript-cn","path":"/blog/use-eslint-typescript.zh-CN.md"}}}]}},"pageContext":{"slug":"/blog/antd-4.0","type":"/blog/","locale":"//"}},"staticQueryHashes":[]}