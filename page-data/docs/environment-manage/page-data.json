{"componentChunkName":"component---src-templates-docs-tsx","path":"/docs/environment-manage","result":{"data":{"markdownRemark":{"html":"<h2 id=\"environment-variables\" style=\"position:relative;\"><a href=\"#environment-variables\" aria-label=\"environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Environment variables</h2>\n<h3 id=\"default-environment-variables\" style=\"position:relative;\"><a href=\"#default-environment-variables\" aria-label=\"default environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Default environment variables</h3>\n<p>Umi provides a large number of <a href=\"https://umijs.org/zh/guide/env-variables.html#%E5%A6%82%E4%BD%95%E9%85%8D%E7%BD%AE\">default environment variables</a>, these variables can help us manage some scaffolding functions.</p>\n<h3 id=\"set-environment-variables\" style=\"position:relative;\"><a href=\"#set-environment-variables\" aria-label=\"set environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Set environment variables</h3>\n<p>Modify the startup command in <code>package.json</code> to add corresponding environment variables.</p>\n<p>The sample code is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/** Omit configuration items */</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/** Omit configuration items */</span>\n    <span class=\"token comment\">// Add the UMI_ENV environment variable in the start command</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev MOCK=none umi dev\"</span>\n    <span class=\"token comment\">/** Omit configuration items */</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">/** Omit configuration items */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"multi-operation-environment-management\" style=\"position:relative;\"><a href=\"#multi-operation-environment-management\" aria-label=\"multi operation environment management permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multi-operation environment management</h2>\n<p>There are often some requirements during development, and different logic processing is performed according to the different environments in which the application runs.</p>\n<p>For example, the <code>dev</code> environment uses the corresponding Url of <code>dev</code>, while the online uses the corresponding Url of <code>prod</code>. Or, in some specific environments, you need to turn on functions that only take effect in that environment.</p>\n<h3 id=\"get-the-name-of-the-current-running-environment\" style=\"position:relative;\"><a href=\"#get-the-name-of-the-current-running-environment\" aria-label=\"get the name of the current running environment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Get the name of the current running environment</h3>\n<p>There is such an environment variable <code>REACT_APP_ENV</code> in the scaffolding of Pro, which represents the specific name of the environment where the current application is located. Such as dev, test, pre, prod, etc.</p>\n<p>If you need to use this environment variable in a non-node environment file other than <code>config</code>, you need to configure <code>define{}</code> when <code>config</code> exports the default <code>defineConfig()</code>.</p>\n<p>The sample code is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// config/config.ts</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span><span class=\"token constant\">REACT_APP_ENV</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/** Omit other configuration */</span><span class=\"token punctuation\">}</span>\n  define<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">REACT_APP_ENV</span><span class=\"token operator\">:</span> <span class=\"token constant\">REACT_APP_ENV</span> <span class=\"token operator\">||</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/** Omit other configuration */</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Use this variable <a href=\"https://github.com/ant-design/ant-design-pro/blob/b005f2a465/src/components/GlobalHeader/RightContent.tsx\">Sample Code</a> as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/components/RightContent/index.tsx</span>\n<span class=\"token comment\">/** Omit other codes */</span>\n<span class=\"token keyword\">const</span> GlobalHeaderRight<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span><span class=\"token constant\">FC</span><span class=\"token operator\">&lt;</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/** Omit other codes */</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>Space className<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>className<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> Omit other codes <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">!</span><span class=\"token operator\">--</span> Display the corresponding environment name on the top right side <span class=\"token operator\">--</span><span class=\"token operator\">></span>\n      <span class=\"token punctuation\">{</span><span class=\"token constant\">REACT_APP_ENV</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>span<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Tag color<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>ENVTagColor<span class=\"token punctuation\">[</span><span class=\"token constant\">REACT_APP_ENV</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token constant\">REACT_APP_ENV</span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Tag<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>span<span class=\"token operator\">></span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Space<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"multiple-environments-and-multiple-configuration-files\" style=\"position:relative;\"><a href=\"#multiple-environments-and-multiple-configuration-files\" aria-label=\"multiple environments and multiple configuration files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Multiple environments and multiple configuration files</h3>\n<p>Pro scaffolding uses Umi as the underlying framework by default. In Umi, you can specify the <code>UMI_ENV</code> environment variable to <a href=\"https://umijs.org/zh-CN/docs/config#Multiple%20environments%20and%20multiple%20copies%20Configuration\">different configuration files for different environments</a>, <code>UMI_ENV</code> needs to be configured in <code>package.json</code>.</p>\n<p>The sample configuration is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token punctuation\">{</span><span class=\"token comment\">/** omitted... */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"analyze\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env ANALYZE=1 umi build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"umi build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev umi build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build:test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=test UMI_ENV=test umi build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build:pre\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=pre UMI_ENV=pre umi build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build:prod\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=prod UMI_ENV=prod umi build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run site &amp;&amp; npm run gh-pages\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"npm run start:dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/** omitted... */</span><span class=\"token punctuation\">}</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start:dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev MOCK=none umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start:no-mock\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev MOCK=none umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start:no-ui\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=dev UMI_ENV=dev UMI_UI=none umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start:pre\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=pre UMI_ENV=pre MOCK=none umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start:test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env REACT_APP_ENV=test UMI_ENV=test MOCK=none umi dev\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span><span class=\"token comment\">/** omitted... */</span><span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">{</span><span class=\"token comment\">/** omitted... */</span><span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>When <code>UMI_ENV</code> is <code>test</code>, you must configure the <code>config.test.ts</code> file in the config directory to manage different variables in the <code>test</code> environment. The Umi framework will form the final configuration after deep merge.</p>\n<p>The sample code is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// config/config.test.ts the configuration file corresponding to the test environment</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'umi'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * Exported multi-environment variable naming convention: always capitalize and use underscore to separate words\n * Note: After adding the variable, you need to add the declaration of the variable in src/typing.d.ts, otherwise the IDE will report an error when using the variable.\n */</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  define<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">API_URL</span><span class=\"token operator\">:</span> <span class=\"token string\">'https://api-test.xxx.com'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// API address</span>\n    <span class=\"token constant\">API_SECRET_KEY</span><span class=\"token operator\">:</span> <span class=\"token string\">'XXXXXXXXXXXXXXXX'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// API call key</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Examples of variable usage:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/services/user.ts</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>request<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span><span class=\"token string\">'umi'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">query</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n<span class=\"token comment\">// Use the API key to call the user interface</span>\n  <span class=\"token keyword\">return</span> request<span class=\"token operator\">&lt;</span><span class=\"token constant\">API</span><span class=\"token punctuation\">.</span>CurrentUser<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token string\">'${API_URL}/api/users'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n<span class=\"token constant\">API_SECRET_KEY</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The structure under the configuration folder config:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ant-design-pro\n├── config\n│ ├── config.dev.ts\n│ ├── config.test.ts\n│ ├── config.pre.ts\n│ ├── config.prod.ts\n│ ├── config.ts\n│ ├── proxy.ts\n│ ├── routes.ts\n│ ├── defaultSettings.ts\n<span class=\"token punctuation\">..</span>.</code></pre></div>\n<h2 id=\"how-to-deal-with-errors\" style=\"position:relative;\"><a href=\"#how-to-deal-with-errors\" aria-label=\"how to deal with errors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>How to deal with errors</h2>\n<p>Since environment variables are used directly, they will not be used by the window object, and errors will be reported in eslint and TypeScript.</p>\n<p>In eslint, you can handle errors by adding the configuration of <a href=\"https://eslint.org/docs/user-guide/configuring#specifying-globals\"><code>globals</code></a>. The code looks like this</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"globals\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"page\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>TypeScript can be defined in <a href=\"https://github.com/ant-design/ant-design-pro/blob/33f562974d1c72e077652223bd816a57933fe242/src/typings.d.ts#L18\"><code>typings.d.ts</code></a>:</p>\n<p>The sample code is as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// src/typings.d.ts</span>\n<span class=\"token comment\">// ... code omitted</span>\ndeclare <span class=\"token keyword\">const</span> <span class=\"token constant\">REACT_APP_ENV</span><span class=\"token operator\">:</span><span class=\"token string\">'test'</span> <span class=\"token operator\">|</span><span class=\"token string\">'dev'</span> <span class=\"token operator\">|</span><span class=\"token string\">'uat'</span> <span class=\"token operator\">|</span><span class=\"token string\">'prod'</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// The following variable declaration corresponds to the variable defined in the config.[env].ts file</span>\ndeclare <span class=\"token keyword\">const</span> <span class=\"token constant\">API_URL</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\ndeclare <span class=\"token keyword\">const</span> <span class=\"token constant\">API_SECRET_KEY</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"the-principle-of-variable-use\" style=\"position:relative;\"><a href=\"#the-principle-of-variable-use\" aria-label=\"the principle of variable use permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The principle of variable use</h2>\n<p><a href=\"https://github.com/ant-design/ant-design-pro/blob/33f562974d1c72e077652223bd816a57933fe242/config/config.ts\">config</a> is the node environment, so you can directly use <code>process.env</code> to get the environment directly Variables, but in the code of a non-node environment, using <code>process.env</code> may only get the custom variable <code>NODE_ENV</code>, and other variables will not be injected automatically by webpack.</p>\n<blockquote>\n<p>About <code>process.env</code> and <code>NODE_ENV</code> please see <a href=\"https://webpack.docschina.org/guides/production/#%E6%8C%87%E5%AE%9A-mode\">here</a>.</p>\n</blockquote>\n<p>At this time, we need to use <a href=\"https://umijs.org/zh/config/#define\"><code>define</code></a>, which is through <a href=\"https://webpack.docschina.org/plugins%20/define-plugin/\"><code>define-plugin</code></a> to achieve this feature, in <a href=\"https://github.com/ant-design/ant-design-pro/blob/33f562974d1c72e077652223bd816a57933fe242/config/config.ts#L65\"><code>config</code></a> Inject the environment variables of node into the define configuration.</p>\n<p>It should be noted that we don't need to use it through <code>window['key']</code>, but use it directly. More specific principles can be seen [`</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/docs/environment-manage/#environment-variables\">Environment variables</a></p>\n<ul>\n<li><a href=\"/docs/environment-manage/#default-environment-variables\">Default environment variables</a></li>\n<li><a href=\"/docs/environment-manage/#set-environment-variables\">Set environment variables</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/docs/environment-manage/#multi-operation-environment-management\">Multi-operation environment management</a></p>\n<ul>\n<li><a href=\"/docs/environment-manage/#get-the-name-of-the-current-running-environment\">Get the name of the current running environment</a></li>\n<li><a href=\"/docs/environment-manage/#multiple-environments-and-multiple-configuration-files\">Multiple environments and multiple configuration files</a></li>\n</ul>\n</li>\n<li><a href=\"/docs/environment-manage/#how-to-deal-with-errors\">How to deal with errors</a></li>\n<li><a href=\"/docs/environment-manage/#the-principle-of-variable-use\">The principle of variable use</a></li>\n</ul>","frontmatter":{"title":"environment variable","order":11,"type":"Advanced Usage"},"fields":{"path":"/docs/environment-manage.en-US.md","slug":"/docs/environment-manage","modifiedTime":1622775473648,"avatarList":"[]"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"Document overview","order":0,"type":"Introduction","time":null},"fields":{"slug":"/docs/overview","path":"/docs/overview.en-US.md"}}},{"node":{"frontmatter":{"title":"文档总览","order":0,"type":"入门","time":null},"fields":{"slug":"/docs/overview-cn","path":"/docs/overview.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Getting Started","order":3,"type":"Introduction","time":null},"fields":{"slug":"/docs/getting-started","path":"/docs/getting-started.en-US.md"}}},{"node":{"frontmatter":{"title":"开始使用","order":3,"type":"入门","time":null},"fields":{"slug":"/docs/getting-started-cn","path":"/docs/getting-started.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Beginner's Need to know","order":4,"type":"Introduction","time":null},"fields":{"slug":"/docs/introduction","path":"/docs/introduction.en-US.md"}}},{"node":{"frontmatter":{"title":"新手需知","order":4,"type":"入门","time":null},"fields":{"slug":"/docs/introduction-cn","path":"/docs/introduction.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Router and Nav","order":10,"type":"Page Development","time":null},"fields":{"slug":"/docs/router-and-nav","path":"/docs/router-and-nav.en-US.md"}}},{"node":{"frontmatter":{"title":"启动项目","order":10,"type":"基础使用","time":null},"fields":{"slug":"/docs/development-cn","path":"/docs/development.zh-CN.md"}}},{"node":{"frontmatter":{"title":"environment variable","order":11,"type":"Advanced Usage","time":null},"fields":{"slug":"/docs/environment-manage","path":"/docs/environment-manage.en-US.md"}}},{"node":{"frontmatter":{"title":"Start Project","order":11,"type":"Basic Usage","time":null},"fields":{"slug":"/docs/development","path":"/docs/development.en-US.md"}}},{"node":{"frontmatter":{"title":"文件夹结构","order":11,"type":"基础使用","time":null},"fields":{"slug":"/docs/folder-cn","path":"/docs/folder.zh-CN.md"}}},{"node":{"frontmatter":{"title":"folder structure","order":12,"type":"Basic Usage","time":null},"fields":{"slug":"/docs/folder","path":"/docs/folder.en-US.md"}}},{"node":{"frontmatter":{"title":"New Page","order":12,"type":"Page Development","time":null},"fields":{"slug":"/docs/new-page","path":"/docs/new-page.en-US.md"}}},{"node":{"frontmatter":{"title":"标题和加载页","order":12,"type":"基础使用","time":null},"fields":{"slug":"/docs/title-landing-cn","path":"/docs/title-landing.zh-CN.md"}}},{"node":{"frontmatter":{"title":"新增页面","order":12,"type":"页面开发","time":null},"fields":{"slug":"/docs/new-page-cn","path":"/docs/new-page.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Title and loading page","order":13,"type":"Basic Usage","time":null},"fields":{"slug":"/docs/title-landing","path":"/docs/title-landing.en-US.md"}}},{"node":{"frontmatter":{"title":"Chart","order":15,"type":"Page Development","time":null},"fields":{"slug":"/docs/graph","path":"/docs/graph.en-US.md"}}},{"node":{"frontmatter":{"title":"Layout","order":15,"type":"Page Development","time":null},"fields":{"slug":"/docs/layout","path":"/docs/layout.en-US.md"}}},{"node":{"frontmatter":{"title":"图表","order":15,"type":"页面开发","time":null},"fields":{"slug":"/docs/graph-cn","path":"/docs/graph.zh-CN.md"}}},{"node":{"frontmatter":{"title":"布局","order":15,"type":"页面开发","time":null},"fields":{"slug":"/docs/layout-cn","path":"/docs/layout.zh-CN.md"}}},{"node":{"frontmatter":{"title":"easy Model","order":19,"type":"Data Management","time":null},"fields":{"slug":"/docs/simple-model","path":"/docs/simple-model.en-US.md"}}},{"node":{"frontmatter":{"title":"简易数据流","order":19,"type":"数据管理","time":null},"fields":{"slug":"/docs/simple-model-cn","path":"/docs/simple-model.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Using css","order":20,"type":"styles and resources","time":null},"fields":{"slug":"/docs/css","path":"/docs/css.en-US.md"}}},{"node":{"frontmatter":{"title":"使用 css","order":20,"type":"样式和资源","time":null},"fields":{"slug":"/docs/css-cn","path":"/docs/css.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Advanced menu","order":22,"type":"Advanced Usage","time":null},"fields":{"slug":"/docs/advanced-menu","path":"/docs/advanced-menu.en-US.md"}}},{"node":{"frontmatter":{"title":"i18n","order":22,"type":"Advanced Usage","time":null},"fields":{"slug":"/docs/i18n","path":"/docs/i18n.en-US.md"}}},{"node":{"frontmatter":{"title":"CSS Modules","order":22,"type":"styles and resources","time":null},"fields":{"slug":"/docs/css-modules","path":"/docs/css-modules.en-US.md"}}},{"node":{"frontmatter":{"title":"CSS Modules","order":22,"type":"样式和资源","time":null},"fields":{"slug":"/docs/css-modules-cn","path":"/docs/css-modules.zh-CN.md"}}},{"node":{"frontmatter":{"title":"use less","order":23,"type":"styles and resources","time":null},"fields":{"slug":"/docs/less","path":"/docs/less.en-US.md"}}},{"node":{"frontmatter":{"title":"使用 less","order":23,"type":"样式和资源","time":null},"fields":{"slug":"/docs/less-cn","path":"/docs/less.zh-CN.md"}}},{"node":{"frontmatter":{"title":"添加图片，字体和文件","order":24,"type":"样式和资源","time":null},"fields":{"slug":"/docs/adding-images-fonts-and-files-cn","path":"/docs/adding-images-fonts-and-files.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Use Pro's Assets","order":30,"type":"Advanced Usage","time":null},"fields":{"slug":"/docs/assets","path":"/docs/assets.en-US.md"}}},{"node":{"frontmatter":{"title":"Permission Management","order":30,"type":"Data Management","time":null},"fields":{"slug":"/docs/authority-management","path":"/docs/authority-management.en-US.md"}}},{"node":{"frontmatter":{"title":"OpenAPI","order":30,"type":"Network Request","time":null},"fields":{"slug":"/docs/openapi","path":"/docs/openapi.en-US.md"}}},{"node":{"frontmatter":{"title":"OpenAPI","order":30,"type":"后端集成","time":null},"fields":{"slug":"/docs/openapi-cn","path":"/docs/openapi.zh-CN.md"}}},{"node":{"frontmatter":{"title":"权限管理","order":30,"type":"数据管理","time":null},"fields":{"slug":"/docs/authority-management-cn","path":"/docs/authority-management.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Build","order":31,"type":"Build & Deployment","time":null},"fields":{"slug":"/docs/build","path":"/docs/build.en-US.md"}}},{"node":{"frontmatter":{"title":"Request","order":31,"type":"Network Request","time":null},"fields":{"slug":"/docs/request","path":"/docs/request.en-US.md"}}},{"node":{"frontmatter":{"title":"Lint","order":31,"type":"Quality","time":null},"fields":{"slug":"/docs/lint","path":"/docs/lint.en-US.md"}}},{"node":{"frontmatter":{"title":"TypeScript","order":31,"type":"Quality","time":null},"fields":{"slug":"/docs/type-script","path":"/docs/typeScript.en-US.md"}}},{"node":{"frontmatter":{"title":"网络请求","order":31,"type":"后端集成","time":null},"fields":{"slug":"/docs/request-cn","path":"/docs/request.zh-CN.md"}}},{"node":{"frontmatter":{"title":"构建","order":31,"type":"构建和部署","time":null},"fields":{"slug":"/docs/build-cn","path":"/docs/build.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Lint","order":31,"type":"质量","time":null},"fields":{"slug":"/docs/lint-cn","path":"/docs/lint.zh-CN.md"}}},{"node":{"frontmatter":{"title":"TypeScript","order":31,"type":"质量","time":null},"fields":{"slug":"/docs/type-script-cn","path":"/docs/typeScript.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Deployment","order":32,"type":"Build & Deployment","time":null},"fields":{"slug":"/docs/deploy","path":"/docs/deploy.en-US.md"}}},{"node":{"frontmatter":{"title":"Global Initial State","order":32,"type":"Data Management","time":null},"fields":{"slug":"/docs/initial-state","path":"/docs/initial-state.en-US.md"}}},{"node":{"frontmatter":{"title":"Proxy","order":32,"type":"Network Request","time":null},"fields":{"slug":"/docs/porxy","path":"/docs/porxy.en-US.md"}}},{"node":{"frontmatter":{"title":"Test","order":32,"type":"Quality","time":null},"fields":{"slug":"/docs/test","path":"/docs/test.en-US.md"}}},{"node":{"frontmatter":{"title":"代理","order":32,"type":"后端集成","time":null},"fields":{"slug":"/docs/proxy-cn","path":"/docs/proxy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"全局初始数据","order":32,"type":"数据管理","time":null},"fields":{"slug":"/docs/initial-state-cn","path":"/docs/initial-state.zh-CN.md"}}},{"node":{"frontmatter":{"title":"部署","order":32,"type":"构建和部署","time":null},"fields":{"slug":"/docs/deploy-cn","path":"/docs/deploy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Debug","order":34,"type":"Network Request","time":null},"fields":{"slug":"/docs/debug","path":"/docs/debug.en-US.md"}}},{"node":{"frontmatter":{"title":"调试","order":34,"type":"后端集成","time":null},"fields":{"slug":"/docs/debug-cn","path":"/docs/debug.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Add pictures, fonts and files","order":44,"type":"styles and resources","time":null},"fields":{"slug":"/docs/adding-images-fonts-and-files","path":"/docs/adding-images-fonts-and-files.en-US.md"}}},{"node":{"frontmatter":{"title":"菜单的高级用法","order":90,"type":"高级使用","time":null},"fields":{"slug":"/docs/advanced-menu-cn","path":"/docs/advanced-menu.zh-CN.md"}}},{"node":{"frontmatter":{"title":"FAQ","order":91,"type":"Other","time":null},"fields":{"slug":"/docs/faq","path":"/docs/faq.en-US.md"}}},{"node":{"frontmatter":{"title":"常见问题","order":91,"type":"其它","time":null},"fields":{"slug":"/docs/faq-cn","path":"/docs/faq.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Pro 资产的使用","order":91,"type":"高级使用","time":null},"fields":{"slug":"/docs/assets-cn","path":"/docs/assets.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Upgrade to V5","order":92,"type":"Other","time":null},"fields":{"slug":"/docs/upgrade-v5","path":"/docs/upgrade-v5.en-US.md"}}},{"node":{"frontmatter":{"title":"升级到 V5","order":92,"type":"其它","time":null},"fields":{"slug":"/docs/upgrade-v5-cn","path":"/docs/upgrade-v5.zh-CN.md"}}},{"node":{"frontmatter":{"title":"环境变量","order":92,"type":"高级使用","time":null},"fields":{"slug":"/docs/environment-manage-cn","path":"/docs/environment-manage.zh-CN.md"}}},{"node":{"frontmatter":{"title":"国际化","order":93,"type":"高级使用","time":null},"fields":{"slug":"/docs/i18n-cn","path":"/docs/i18n.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Design Kit","order":94,"type":"Other","time":null},"fields":{"slug":"/docs/resource","path":"/docs/resource.en-US.md"}}},{"node":{"frontmatter":{"title":"设计资源","order":94,"type":"其它","time":null},"fields":{"slug":"/docs/resource-cn","path":"/docs/resource.zh-CN.md"}}},{"node":{"frontmatter":{"title":"测试","order":94,"type":"质量","time":null},"fields":{"slug":"/docs/test-cn","path":"/docs/test.zh-CN.md"}}}]}},"pageContext":{"slug":"/docs/environment-manage","type":"/docs/","locale":"//"}},"staticQueryHashes":[]}