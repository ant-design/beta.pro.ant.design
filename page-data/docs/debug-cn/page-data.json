{"componentChunkName":"component---src-templates-docs-tsx","path":"/docs/debug-cn","result":{"data":{"markdownRemark":{"html":"<p>编写代码其实只是开发者的一小部分工作。为了让工作更有效率，我们还必须精通 debug。工欲善其事必先利其器，前端开发现在最好的工具就是 google 的 <a href=\"https://developers.google.com/web/tools/chrome-devtools?utm_source=dcc&#x26;utm_medium=redirect&#x26;utm_campaign=2018Q2\">Chrome DevTools</a>，而且还贴心的准备了多语言的版本。</p>\n<p>我们在这里会简单的介绍几个常用的功能，更多的功能可以查看官网，看一遍可以极大的提升效率。</p>\n<ul>\n<li>元素面板</li>\n<li>控制台面板</li>\n<li>网络请求</li>\n</ul>\n<h3 id=\"元素面板\" style=\"position:relative;\"><a href=\"#%E5%85%83%E7%B4%A0%E9%9D%A2%E6%9D%BF\" aria-label=\"元素面板 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>元素面板</h3>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/inspect-styles\">元素面板</a>可以检查和实时编辑页面的 HTML 与 CSS。前端的核心竞争力就是美观的样式和适当的交互带来的用户体验。这个 debug 是我们使用的最多的功能。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/49Hj4%24GyUa/F59465FF-8E99-4F65-B3D5-97003C10DF64.png\" alt=\"元素面板\"></p>\n<blockquote>\n<p>对于中国用户推荐使用微软的 edge 最新版本，帮助我们把控制台也做了国际化。降低了使用成本。</p>\n</blockquote>\n<p>元素面板中最重要的功能就是元素检查，这个功能的使用非常频繁，具体可以查看 google 的官方<a href=\"https://developers.google.com/web/tools/chrome-devtools/inspect-styles\">链接</a>。官方有相应的视频和功能例子。</p>\n<h3 id=\"控制台面板\" style=\"position:relative;\"><a href=\"#%E6%8E%A7%E5%88%B6%E5%8F%B0%E9%9D%A2%E6%9D%BF\" aria-label=\"控制台面板 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>控制台面板</h3>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/console\">控制台</a> 是调试 JS 必备的工具。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/1tFWntZVBu/64790AE3-1625-45B8-9809-4EC5E7F4AB35.png\" alt=\"png\"></p>\n<p>在面板中可以看到 js 的 <code>console</code> 输出，<code>console.log</code> 输出是简单有效的调试方式。这里介绍输出的小技巧。</p>\n<p>首先是输出 state，当然在 hooks 中我们一般是输出某些变量，这种输出方法可以保持格式，在 node 调试中也是非常好用的。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token punctuation\">{</span><span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>state<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p><code>console.assert</code> 是调试循环的利器，如果 expression 表达式的结果为 false，Console.assert 将会抛出错误。关键的是，assert 函数不会由于报错而停止评估之后的代码。它可以帮助你调试冗长棘手的代码，或者找到多次迭代后函数自身产生的错误。</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">assert</span><span class=\"token punctuation\">(</span>expression<span class=\"token punctuation\">,</span> message<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>更加详细的 api 可以看<a href=\"https://developer.mozilla.org/zh-CN/docs/Web/API/Console\">这里</a>。</p>\n<p>在代码中加入 debugger; 就可以将项目停住同时 源代码面板中对齐进行 debug，他会自动生成一个断点。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/OLGUPQ7CyF/loc-breakpoint.png\" alt=\"debugger\"></p>\n<h3 id=\"网络面板\" style=\"position:relative;\"><a href=\"#%E7%BD%91%E7%BB%9C%E9%9D%A2%E6%9D%BF\" aria-label=\"网络面板 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>网络面板</h3>\n<p><a href=\"https://developers.google.com/web/tools/chrome-devtools/network\">网络面板</a>也是我们常用的面板，其中可以看到任何网络请求，查看网络请求的返回和各种状态。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/5VLhkjfCPu/A45663AA-4173-4A14-A3E4-1DB2DC2522FD.png\" alt=\"网络面板\"></p>\n<p>简单的用法在官方的文档中已经详细说明，我们这里推荐一个小技巧，可以将网络请求的结果保存为一个名叫 <code>temp1</code> 的变量，我们可以使用 <code>console.dir(temp1)</code> 查看对象，当然也可以对它进行操作。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/p4PHbdKvJB/A76A1E89-9498-49DB-9608-558D25394E10.png\" alt=\"查询为变量\"></p>\n<h2 id=\"sourcemap\" style=\"position:relative;\"><a href=\"#sourcemap\" aria-label=\"sourcemap permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SourceMap</h2>\n<p>为了保证代码的体积，现有情况下 SourceMap 几乎是必选的配置。在 Pro 中我们的默认打开了 source map,如果你需要别的定义可以在 config.ts 中配置 <a href=\"https://webpack.js.org/configuration/devtool/\">devtool</a>。</p>\n<p>一旦你打开了 SourceMap 就可以在源代码页面使用 Control+P 或 Command+P (Mac) 来打开文件选择，使用方式与 vscode 基本相同。</p>\n<p><img src=\"https://gw.alipayobjects.com/zos/antfincdn/1rIW5jiJ8c/8AEB4626-D14A-41E5-BD03-F712437CA947.png\" alt=\"devtools\"></p>\n<h2 id=\"bug-调试方法\" style=\"position:relative;\"><a href=\"#bug-%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95\" aria-label=\"bug 调试方法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>bug 调试方法</h2>\n<p>在我们的开发中，由于对底层的不理解或者兼容性的问题，很有可能会出现白屏或者 OMM 的问题，也有一些问题没有任何可以 debug 着手的方式。这时候就要用到一些 debug 的方案。</p>\n<h3 id=\"二分法定位\" style=\"position:relative;\"><a href=\"#%E4%BA%8C%E5%88%86%E6%B3%95%E5%AE%9A%E4%BD%8D\" aria-label=\"二分法定位 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>二分法定位</h3>\n<p>二分法是 debug 中最常用也是最好用的方式，非常适用于我的代码昨天还是好的和各类 OMM 报错。我们可以程序逻辑一点点注释掉，不断地进行排错，完全能把问题可能出现的范围缩小，然后找出罪魁祸首。再用常规手段调试。</p>\n<p>node 中 OMM 最常用的方式就是删除一半依赖，然后进行重试来不断缩小范围，直到找个问题所在。二分调试大法每次遇到棘手的 bug，基本上都能解决，程序员必备技能，无关语言。</p>\n<h3 id=\"小黄鸭法\" style=\"position:relative;\"><a href=\"#%E5%B0%8F%E9%BB%84%E9%B8%AD%E6%B3%95\" aria-label=\"小黄鸭法 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>小黄鸭法</h3>\n<p>处理 bug 的过程，最难的不是怎么解决问题，而是如何定位代码的 bug，如果实在是一筹莫展，尤其是算法类的问题。我们可以通过小黄鸭法来进行 debug。我们可以找任何物体也可以是同事讲一遍或者讨论一遍，当然上网发帖也是好方式。</p>\n<h3 id=\"重写一遍\" style=\"position:relative;\"><a href=\"#%E9%87%8D%E5%86%99%E4%B8%80%E9%81%8D\" aria-label=\"重写一遍 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>重写一遍</h3>\n<p>这个方法成本最高，适用于可以乱七八糟的代码，尤其是陈年代码，如果实在搞不懂修不了 bug，可以加好测试用例重新写一遍。毕竟很多的 bug 其实都是错别字。</p>","tableOfContents":"<ul>\n<li>\n<ul>\n<li><a href=\"/docs/debug-cn/#%E5%85%83%E7%B4%A0%E9%9D%A2%E6%9D%BF\">元素面板</a></li>\n<li><a href=\"/docs/debug-cn/#%E6%8E%A7%E5%88%B6%E5%8F%B0%E9%9D%A2%E6%9D%BF\">控制台面板</a></li>\n<li><a href=\"/docs/debug-cn/#%E7%BD%91%E7%BB%9C%E9%9D%A2%E6%9D%BF\">网络面板</a></li>\n</ul>\n</li>\n<li><a href=\"/docs/debug-cn/#sourcemap\">SourceMap</a></li>\n<li>\n<p><a href=\"/docs/debug-cn/#bug-%E8%B0%83%E8%AF%95%E6%96%B9%E6%B3%95\">bug 调试方法</a></p>\n<ul>\n<li><a href=\"/docs/debug-cn/#%E4%BA%8C%E5%88%86%E6%B3%95%E5%AE%9A%E4%BD%8D\">二分法定位</a></li>\n<li><a href=\"/docs/debug-cn/#%E5%B0%8F%E9%BB%84%E9%B8%AD%E6%B3%95\">小黄鸭法</a></li>\n<li><a href=\"/docs/debug-cn/#%E9%87%8D%E5%86%99%E4%B8%80%E9%81%8D\">重写一遍</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"调试","order":34,"type":"后端集成"},"fields":{"path":"/docs/debug.zh-CN.md","slug":"/docs/debug-cn","modifiedTime":1620370023822,"avatarList":"[]"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"文档总览","order":0,"type":"入门","time":null},"fields":{"slug":"/docs/overview-cn","path":"/docs/overview.zh-CN.md"}}},{"node":{"frontmatter":{"title":"开始使用","order":3,"type":"入门","time":null},"fields":{"slug":"/docs/getting-started-cn","path":"/docs/getting-started.zh-CN.md"}}},{"node":{"frontmatter":{"title":"新手需知","order":4,"type":"入门","time":null},"fields":{"slug":"/docs/introduction-cn","path":"/docs/introduction.zh-CN.md"}}},{"node":{"frontmatter":{"title":"启动项目","order":10,"type":"基础使用","time":null},"fields":{"slug":"/docs/development-cn","path":"/docs/development.zh-CN.md"}}},{"node":{"frontmatter":{"title":"文件夹结构","order":11,"type":"基础使用","time":null},"fields":{"slug":"/docs/folder-cn","path":"/docs/folder.zh-CN.md"}}},{"node":{"frontmatter":{"title":"标题和加载页","order":12,"type":"基础使用","time":null},"fields":{"slug":"/docs/title-landing-cn","path":"/docs/title-landing.zh-CN.md"}}},{"node":{"frontmatter":{"title":"新增页面","order":12,"type":"页面开发","time":null},"fields":{"slug":"/docs/new-page-cn","path":"/docs/new-page.zh-CN.md"}}},{"node":{"frontmatter":{"title":"图表","order":15,"type":"页面开发","time":null},"fields":{"slug":"/docs/graph-cn","path":"/docs/graph.zh-CN.md"}}},{"node":{"frontmatter":{"title":"布局","order":15,"type":"页面开发","time":null},"fields":{"slug":"/docs/layout-cn","path":"/docs/layout.zh-CN.md"}}},{"node":{"frontmatter":{"title":"简易数据流","order":19,"type":"数据管理","time":null},"fields":{"slug":"/docs/simple-model-cn","path":"/docs/simple-model.zh-CN.md"}}},{"node":{"frontmatter":{"title":"使用 css","order":20,"type":"样式和资源","time":null},"fields":{"slug":"/docs/css-cn","path":"/docs/css.zh-CN.md"}}},{"node":{"frontmatter":{"title":"CSS Modules","order":22,"type":"样式和资源","time":null},"fields":{"slug":"/docs/css-modules-cn","path":"/docs/css-modules.zh-CN.md"}}},{"node":{"frontmatter":{"title":"使用 less","order":23,"type":"样式和资源","time":null},"fields":{"slug":"/docs/less-cn","path":"/docs/less.zh-CN.md"}}},{"node":{"frontmatter":{"title":"添加图片，字体和文件","order":24,"type":"样式和资源","time":null},"fields":{"slug":"/docs/adding-images-fonts-and-files-cn","path":"/docs/adding-images-fonts-and-files.zh-CN.md"}}},{"node":{"frontmatter":{"title":"OpenAPI","order":30,"type":"后端集成","time":null},"fields":{"slug":"/docs/openapi-cn","path":"/docs/openapi.zh-CN.md"}}},{"node":{"frontmatter":{"title":"权限管理","order":30,"type":"数据管理","time":null},"fields":{"slug":"/docs/authority-management-cn","path":"/docs/authority-management.zh-CN.md"}}},{"node":{"frontmatter":{"title":"网络请求","order":31,"type":"后端集成","time":null},"fields":{"slug":"/docs/request-cn","path":"/docs/request.zh-CN.md"}}},{"node":{"frontmatter":{"title":"构建","order":31,"type":"构建和部署","time":null},"fields":{"slug":"/docs/build-cn","path":"/docs/build.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Lint","order":31,"type":"质量","time":null},"fields":{"slug":"/docs/lint-cn","path":"/docs/lint.zh-CN.md"}}},{"node":{"frontmatter":{"title":"TypeScript","order":31,"type":"质量","time":null},"fields":{"slug":"/docs/type-script-cn","path":"/docs/typeScript.zh-CN.md"}}},{"node":{"frontmatter":{"title":"代理","order":32,"type":"后端集成","time":null},"fields":{"slug":"/docs/proxy-cn","path":"/docs/proxy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"全局初始数据","order":32,"type":"数据管理","time":null},"fields":{"slug":"/docs/initial-state-cn","path":"/docs/initial-state.zh-CN.md"}}},{"node":{"frontmatter":{"title":"部署","order":32,"type":"构建和部署","time":null},"fields":{"slug":"/docs/deploy-cn","path":"/docs/deploy.zh-CN.md"}}},{"node":{"frontmatter":{"title":"调试","order":34,"type":"后端集成","time":null},"fields":{"slug":"/docs/debug-cn","path":"/docs/debug.zh-CN.md"}}},{"node":{"frontmatter":{"title":"菜单的高级用法","order":90,"type":"高级使用","time":null},"fields":{"slug":"/docs/advanced-menu-cn","path":"/docs/advanced-menu.zh-CN.md"}}},{"node":{"frontmatter":{"title":"常见问题","order":91,"type":"其它","time":null},"fields":{"slug":"/docs/faq-cn","path":"/docs/faq.zh-CN.md"}}},{"node":{"frontmatter":{"title":"Pro 资产的使用","order":91,"type":"高级使用","time":null},"fields":{"slug":"/docs/assets-cn","path":"/docs/assets.zh-CN.md"}}},{"node":{"frontmatter":{"title":"升级到 V5","order":92,"type":"其它","time":null},"fields":{"slug":"/docs/upgrade-v5-cn","path":"/docs/upgrade-v5.zh-CN.md"}}},{"node":{"frontmatter":{"title":"环境变量","order":92,"type":"高级使用","time":null},"fields":{"slug":"/docs/environment-manage-cn","path":"/docs/environment-manage.zh-CN.md"}}},{"node":{"frontmatter":{"title":"国际化","order":93,"type":"高级使用","time":null},"fields":{"slug":"/docs/i18n-cn","path":"/docs/i18n.zh-CN.md"}}},{"node":{"frontmatter":{"title":"设计资源","order":94,"type":"其它","time":null},"fields":{"slug":"/docs/resource-cn","path":"/docs/resource.zh-CN.md"}}},{"node":{"frontmatter":{"title":"测试","order":94,"type":"质量","time":null},"fields":{"slug":"/docs/test-cn","path":"/docs/test.zh-CN.md"}}}]}},"pageContext":{"slug":"/docs/debug-cn","type":"/docs/","locale":"/-cn/"}},"staticQueryHashes":[]}