{"componentChunkName":"component---src-templates-docs-tsx","path":"/config/config-cn","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>查看 <a href=\"https://umijs.org/zh-CN/config\">umi 文档</a>获取更多配置</p>\n</blockquote>\n<h2 id=\"base\" style=\"position:relative;\"><a href=\"#base\" aria-label=\"base permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>base</h2>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Default: <code>/</code></li>\n</ul>\n<p>设置路由前缀，通常用于部署到非根目录。</p>\n<p>比如，你有路由 <code>/</code> 和 <code>/users</code>，然后设置了 base 为 <code>/foo/</code>，那么就可以通过 <code>/foo/</code> 和 <code>/foo/users</code> 访问到之前的路由。</p>\n<h2 id=\"chainwebpack\" style=\"position:relative;\"><a href=\"#chainwebpack\" aria-label=\"chainwebpack permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>chainWebpack</h2>\n<ul>\n<li>Type: <code>Function</code></li>\n</ul>\n<p>通过 <a href=\"https://github.com/mozilla-neutrino/webpack-chain\">webpack-chain</a> 的 API 修改 webpack 配置。</p>\n<p>比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">chainWebpack</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">memo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> env<span class=\"token punctuation\">,</span> webpack<span class=\"token punctuation\">,</span> createCSSRule <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 设置 alias</span>\n    memo<span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">.</span>alias<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/tmp/a/b/foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 删除 umi 内置插件</span>\n    memo<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'progress'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    memo<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'friendly-error'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    memo<span class=\"token punctuation\">.</span>plugins<span class=\"token punctuation\">.</span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token string\">'copy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>支持异步，</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">chainWebpack</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">memo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">await</span> <span class=\"token function\">delay</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    memo<span class=\"token punctuation\">.</span>resolve<span class=\"token punctuation\">.</span>alias<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/tmp/a/b/foo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>SSR 时，修改服务端构建配置</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BundlerConfigType <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'umi'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">chainWebpack</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">memo<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> type <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 对 ssr bundler config 的修改</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> BundlerConfigType<span class=\"token punctuation\">.</span>ssr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 服务端渲染构建扩展</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// 对 csr bundler config 的修改</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>type <span class=\"token operator\">===</span> BundlerConfigType<span class=\"token punctuation\">.</span>csr<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// 客户端渲染构建扩展</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">// ssr 和 csr 都扩展</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>参数有：</p>\n<ul>\n<li>memo，当前 webpack-chain 对象</li>\n<li>env，当前环境，<code>development</code>、<code>production</code> 或 <code>test</code> 等</li>\n<li>webpack，webpack 实例，用于获取其内部插件</li>\n<li>createCSSRule，用于扩展其他 CSS 实现，比如 sass, stylus</li>\n<li>type，当前 webpack 实例类型，默认走 csr，如果开启 ssr，会有 ssr 的 webpack 实例</li>\n</ul>\n<h2 id=\"devserver\" style=\"position:relative;\"><a href=\"#devserver\" aria-label=\"devserver permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>devServer</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<p>配置开发服务器。</p>\n<p>包含以下子配置项：</p>\n<ul>\n<li>port，端口号，默认 <code>8000</code></li>\n<li>host，默认 <code>0.0.0.0</code></li>\n<li>https，是否启用 https server，同时也会开启 HTTP/2</li>\n<li>writeToDisk，生成 <code>assets</code> 到文件系统</li>\n</ul>\n<p>启用 port 和 host 也可以通过环境变量 PORT 和 HOST 临时指定。</p>\n<h2 id=\"devtool\" style=\"position:relative;\"><a href=\"#devtool\" aria-label=\"devtool permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>devtool</h2>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Default: <code>cheap-module-source-map</code> in dev, <code>false</code> in build</li>\n</ul>\n<p>用户配置 sourcemap 类型。</p>\n<p>常见的可选类型有：</p>\n<ul>\n<li>eval，最快的类型，但不支持低版本浏览器，如果编译慢，可以试试</li>\n<li>source-map，最慢最全的类型</li>\n</ul>\n<p>更多类型详见 <a href=\"https://webpack.js.org/configuration/devtool/#devtool\">webpack#devtool 配置</a>。</p>\n<h2 id=\"dynamicimport\" style=\"position:relative;\"><a href=\"#dynamicimport\" aria-label=\"dynamicimport permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dynamicImport</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>false</code></li>\n</ul>\n<p>是否启用按需加载，即是否把构建产物进行拆分，在需要的时候下载额外的 JS 再执行。</p>\n<p>默认关闭时，只生成一个 js 和一个 css，即 <code>umi.js</code> 和 <code>umi.css</code>。优点是省心，部署方便；缺点是对用户来说初次打开网站会比较慢。</p>\n<p>打包后通常是这样的，</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">+ dist\n  - umi.js\n  - umi.css\n  - index.html</code></pre></div>\n<p>启用之后，需要考虑 publicPath 的配置，可能还需要考虑 runtimePublicPath，因为需要知道从哪里异步加载 JS、CSS 和图片等资源。</p>\n<p>打包后通常是这样，</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">+ dist\n  - umi.js\n  - umi.css\n  - index.html\n  - p__index.js\n  - p__users__index.js</code></pre></div>\n<p>这里的 <code>p__users_index.js</code> 是路由组件所在路径 <code>src/pages/users/index</code>，其中 <code>src</code> 会被忽略，<code>pages</code> 被替换为 <code>p</code>。</p>\n<p>包含以下子配置项，</p>\n<ul>\n<li>loading, 类型为字符串，指向 loading 组件文件</li>\n</ul>\n<p>比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  dynamicImport<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    loading<span class=\"token operator\">:</span> <span class=\"token string\">'@/Loading'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>然后在 src 目录下新建 <code>Loading.tsx</code>，</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">加载中...</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>构建之后使用低网络模拟就能看到效果。</p>\n<h2 id=\"dynamicimportsyntax\" style=\"position:relative;\"><a href=\"#dynamicimportsyntax\" aria-label=\"dynamicimportsyntax permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dynamicImportSyntax</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>false</code></li>\n</ul>\n<p>如果你不需要路由按需加载，只需要支持 <code>import()</code> 语法的 code splitting，可使用此配置。</p>\n<p>比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  dynamicImportSyntax<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"exportstatic\" style=\"position:relative;\"><a href=\"#exportstatic\" aria-label=\"exportstatic permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>exportStatic</h2>\n<ul>\n<li>Type: <code>object</code></li>\n</ul>\n<p>配置 html 的输出形式，默认只输出 <code>index.html</code>。</p>\n<p>如果需要预渲染，请开启 <a href=\"#ssr-32\">ssr</a> 配置，常用来解决没有服务端情况下，页面的 SEO 和首屏渲染提速。</p>\n<p>如果开启 <code>exportStatic</code>，则会针对每个路由输出 html 文件。</p>\n<p>包含以下几个属性：</p>\n<ul>\n<li>htmlSuffix，启用 <code>.html</code> 后缀。</li>\n<li>dynamicRoot，部署到任意路径。</li>\n<li>extraRoutePaths，生成额外的路径页面，用法和场景见 <a href=\"/zh-CN/docs/ssr#%E9%A2%84%E6%B8%B2%E6%9F%93%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1\">预渲染动态路由</a></li>\n</ul>\n<h2 id=\"externals\" style=\"position:relative;\"><a href=\"#externals\" aria-label=\"externals permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>externals</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<p>设置哪些模块可以不被打包，通过 <code>&#x3C;script></code> 或其他方式引入，通常需要和 scripts 或 headScripts 配置同时使用。</p>\n<p>比如，</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  externals<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    react<span class=\"token operator\">:</span> <span class=\"token string\">'window.React'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  scripts<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'https://unpkg.com/react@17.0.1/umd/react.production.min.js'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>简单理解的话，可以理解为 <code>import react from 'react'</code> 会被替换为 <code>const react = window.React</code>。</p>\n<h2 id=\"fastrefresh-badge33badge\" style=\"position:relative;\"><a href=\"#fastrefresh-badge33badge\" aria-label=\"fastrefresh badge33badge permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>fastRefresh <Badge>3.3+</Badge></h2>\n<ul>\n<li>Type: <code>object</code></li>\n</ul>\n<p>快速刷新（Fast Refresh），开发时可以<strong>保持组件状态</strong>，同时编辑提供<strong>即时反馈</strong>。</p>\n<p><a href=\"/docs/fast-refresh\">文档</a></p>\n<h2 id=\"hash\" style=\"position:relative;\"><a href=\"#hash\" aria-label=\"hash permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hash</h2>\n<ul>\n<li>Type: <code>boolean</code></li>\n<li>Default: <code>false</code></li>\n</ul>\n<p>配置是否让生成的文件包含 hash 后缀，通常用于增量发布和避免浏览器加载缓存。</p>\n<p>启用 hash 后，产物通常是这样，</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">+ dist\n  - logo.sw892d.png\n  - umi.df723s.js\n  - umi.8sd8fw.css\n  - index.html</code></pre></div>\n<p>注：</p>\n<ul>\n<li>html 文件始终没有 hash</li>\n</ul>\n<h2 id=\"headscripts\" style=\"position:relative;\"><a href=\"#headscripts\" aria-label=\"headscripts permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>headScripts</h2>\n<ul>\n<li>Type: <code>Array</code></li>\n<li>Default: <code>[]</code></li>\n</ul>\n<p>配置 <code>&#x3C;head></code> 里的额外脚本，数组项为字符串或对象。</p>\n<p>大部分场景下用字符串格式就够了，比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  headScripts<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">alert(1);</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">https://a.com/b.js</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>会生成 HTML，</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://a.com/b.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>如果要使用额外属性，可以用对象的格式，</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  headScripts<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span> src<span class=\"token operator\">:</span> <span class=\"token string\">'/foo.js'</span><span class=\"token punctuation\">,</span> defer<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span> content<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">alert('你好');</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> charset<span class=\"token operator\">:</span> <span class=\"token string\">'utf-8'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>会生成 HTML，</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/foo.js<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">defer</span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>utf-8<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n    <span class=\"token function\">alert</span><span class=\"token punctuation\">(</span><span class=\"token string\">'你好'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  </span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<h2 id=\"history\" style=\"position:relative;\"><a href=\"#history\" aria-label=\"history permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>history</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>{ type: 'browser' }</code></li>\n</ul>\n<p>配置 <a href=\"https://github.com/ReactTraining/history/blob/master/docs/GettingStarted.md\">history 类型和配置项</a>。</p>\n<p>包含以下子配置项：</p>\n<ul>\n<li>type，可选 <code>browser</code>、<code>hash</code> 和 <code>memory</code></li>\n<li>options，传给 create{{{ type }}}History 的配置项，每个类型器的配置项不同</li>\n</ul>\n<p>注意，</p>\n<ul>\n<li>options 中，<code>getUserConfirmation</code> 由于是函数的格式，暂不支持配置</li>\n<li>options 中，<code>basename</code> 无需配置，通过 umi 的 <code>base</code> 配置指定</li>\n</ul>\n<h2 id=\"links\" style=\"position:relative;\"><a href=\"#links\" aria-label=\"links permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>links</h2>\n<ul>\n<li>Type: <code>Array</code></li>\n<li>Default: <code>[]</code></li>\n</ul>\n<p>配置额外的 link 标签。</p>\n<h2 id=\"outputpath\" style=\"position:relative;\"><a href=\"#outputpath\" aria-label=\"outputpath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>outputPath</h2>\n<ul>\n<li>Type: <code>string</code></li>\n<li>Default: <code>dist</code></li>\n</ul>\n<p>指定输出路径。</p>\n<p>注意：</p>\n<ul>\n<li>不允许设定为 <code>src</code>、<code>public</code>、<code>pages</code>、<code>mock</code>、<code>config</code> 等约定目录</li>\n</ul>\n<h2 id=\"proxy\" style=\"position:relative;\"><a href=\"#proxy\" aria-label=\"proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>proxy</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<p>配置代理能力。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">export default {\n  proxy: {\n    &#39;/api&#39;: {\n      &#39;target&#39;: &#39;http://jsonplaceholder.typicode.com/&#39;,\n      &#39;changeOrigin&#39;: true,\n      &#39;pathRewrite&#39;: { &#39;^/api&#39; : &#39;&#39; },\n    },\n  },\n}</code></pre></div>\n<p>然后访问 <code>/api/users</code> 就能访问到 <a href=\"http://jsonplaceholder.typicode.com/users\">http://jsonplaceholder.typicode.com/users</a> 的数据。</p>\n<blockquote>\n<p>注意：proxy 配置仅在 dev 时生效。</p>\n</blockquote>\n<h2 id=\"publicpath\" style=\"position:relative;\"><a href=\"#publicpath\" aria-label=\"publicpath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>publicPath</h2>\n<ul>\n<li>Type: <code>publicPath</code></li>\n<li>Default: <code>/</code></li>\n</ul>\n<p>配置 webpack 的 publicPath。当打包的时候，webpack 会在静态文件路径前面添加 <code>publicPath</code> 的值，当你需要修改静态文件地址时，比如使用 CDN 部署，把 <code>publicPath</code> 的值设为 CDN 的值就可以。如果使用一些特殊的文件系统，比如混合开发或者 cordova 等技术，可以尝试将 <code>publicPath</code> 设置成 <code>./</code> 相对路径。</p>\n<blockquote>\n<p>相对路径 <code>./</code> 有一些限制，例如不支持多层路由 <code>/foo/bar</code>，只支持单层路径 <code>/foo</code></p>\n</blockquote>\n<p>如果你的应用部署在域名的子路径上，例如 <code>https://www.your-app.com/foo/</code>，你需要设置 <code>publicPath</code> 为 <code>/foo/</code>，如果同时要兼顾开发环境正常调试，你可以这样配置：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> defineConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'umi'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token function\">defineConfig</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  publicPath<span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">===</span> <span class=\"token string\">'production'</span> <span class=\"token operator\">?</span> <span class=\"token string\">'/foo/'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"routes\" style=\"position:relative;\"><a href=\"#routes\" aria-label=\"routes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>routes</h2>\n<ul>\n<li>Type: <code>Array(route)</code></li>\n</ul>\n<p>配置路由。</p>\n<p>umi 的路由基于 <a href=\"https://reacttraining.com/react-router/web/guides/quick-start\">react-router@5</a> 实现，配置和 react-router 基本一致，详见<a href=\"./docs/routing\">路由配置</a>章节。</p>\n<p>比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  routes<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      path<span class=\"token operator\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n      component<span class=\"token operator\">:</span> <span class=\"token string\">'@/layouts/index'</span><span class=\"token punctuation\">,</span>\n      routes<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'/user'</span><span class=\"token punctuation\">,</span> redirect<span class=\"token operator\">:</span> <span class=\"token string\">'/user/login'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span> path<span class=\"token operator\">:</span> <span class=\"token string\">'/user/login'</span><span class=\"token punctuation\">,</span> component<span class=\"token operator\">:</span> <span class=\"token string\">'./user/login'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>注意：</p>\n<ul>\n<li><code>component</code> 的值如果是相对路径，会以 <code>src/pages</code> 为基础路径开始解析</li>\n<li>如果配置了 <code>routes</code>，则优先使用配置式路由，且约定式路由会不生效</li>\n</ul>\n<h2 id=\"runtimepublicpath\" style=\"position:relative;\"><a href=\"#runtimepublicpath\" aria-label=\"runtimepublicpath permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>runtimePublicPath</h2>\n<ul>\n<li>Type: <code>boolean</code></li>\n<li>Default: <code>false</code></li>\n</ul>\n<p>配置是否启用运行时 publicPath。</p>\n<p>通常用于一套代码在不同环境有不同的 publicPath 需要，然后 publicPath 由服务器通过 HTML 的 <code>window.publicPath</code> 全局变量输出。</p>\n<p>启用后，打包时会额外加上这一段，</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">__webpack_public_path__ <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span>resourceBaseUrl <span class=\"token operator\">||</span> window<span class=\"token punctuation\">.</span>publicPath<span class=\"token punctuation\">;</span></code></pre></div>\n<p>然后 webpack 在异步加载 JS 等资源文件时会从 <code>window.resourceBaseUrl</code> 或 <code>window.publicPath</code> 里开始找。</p>\n<h2 id=\"targets\" style=\"position:relative;\"><a href=\"#targets\" aria-label=\"targets permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>targets</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>{ chrome: 49, firefox: 64, safari: 10, edge: 13, ios: 10 }</code></li>\n</ul>\n<p>配置需要兼容的浏览器最低版本，会自动引入 polyfill 和做语法转换。</p>\n<p>比如要兼容 ie11，需配置：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  targets<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    ie<span class=\"token operator\">:</span> <span class=\"token number\">11</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>注意：</p>\n<ul>\n<li>配置的 targets 会和合并到默认值，不需要重复配置</li>\n<li>子项配置为 <code>false</code> 可删除默认配置的版本号</li>\n</ul>\n<h2 id=\"theme\" style=\"position:relative;\"><a href=\"#theme\" aria-label=\"theme permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>theme</h2>\n<ul>\n<li>Type: <code>object</code></li>\n<li>Default: <code>{}</code></li>\n</ul>\n<p>配置主题，实际上是配 less 变量。</p>\n<p>比如：</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  theme<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">'@primary-color'</span><span class=\"token operator\">:</span> <span class=\"token string\">'#1DA57A'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>","tableOfContents":"<ul>\n<li><a href=\"/config/config-cn/#base\">base</a></li>\n<li><a href=\"/config/config-cn/#chainwebpack\">chainWebpack</a></li>\n<li><a href=\"/config/config-cn/#devserver\">devServer</a></li>\n<li><a href=\"/config/config-cn/#devtool\">devtool</a></li>\n<li><a href=\"/config/config-cn/#dynamicimport\">dynamicImport</a></li>\n<li><a href=\"/config/config-cn/#dynamicimportsyntax\">dynamicImportSyntax</a></li>\n<li><a href=\"/config/config-cn/#exportstatic\">exportStatic</a></li>\n<li><a href=\"/config/config-cn/#externals\">externals</a></li>\n<li><a href=\"/config/config-cn/#fastrefresh-badge33badge\">fastRefresh <Badge>3.3+</Badge></a></li>\n<li><a href=\"/config/config-cn/#hash\">hash</a></li>\n<li><a href=\"/config/config-cn/#headscripts\">headScripts</a></li>\n<li><a href=\"/config/config-cn/#history\">history</a></li>\n<li><a href=\"/config/config-cn/#links\">links</a></li>\n<li><a href=\"/config/config-cn/#outputpath\">outputPath</a></li>\n<li><a href=\"/config/config-cn/#proxy\">proxy</a></li>\n<li><a href=\"/config/config-cn/#publicpath\">publicPath</a></li>\n<li><a href=\"/config/config-cn/#routes\">routes</a></li>\n<li><a href=\"/config/config-cn/#runtimepublicpath\">runtimePublicPath</a></li>\n<li><a href=\"/config/config-cn/#targets\">targets</a></li>\n<li><a href=\"/config/config-cn/#theme\">theme</a></li>\n</ul>","frontmatter":{"title":"配置","order":1,"type":null},"fields":{"path":"/config/config.zh-CN.md","slug":"/config/config-cn","modifiedTime":1619607067299,"avatarList":"[]"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"title":"运行时配置","order":3,"type":null,"time":null},"fields":{"slug":"/config/runtime-api-cn","path":"/config/runtime-api.zh-CN.md"}}},{"node":{"frontmatter":{"title":"API","order":2,"type":null,"time":null},"fields":{"slug":"/config/api-cn","path":"/config/api.zh-CN.md"}}},{"node":{"frontmatter":{"title":"配置","order":1,"type":null,"time":null},"fields":{"slug":"/config/config-cn","path":"/config/config.zh-CN.md"}}}]}},"pageContext":{"slug":"/config/config-cn","type":"/config/","locale":"/-cn/"}},"staticQueryHashes":[]}